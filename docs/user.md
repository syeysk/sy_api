# Сущность "Пользователь"

Импорт класса пользователя:
```python
from syapi import User
```

Для получения доступа есть 3 метода:
```python
user = User()
# через имя пользователя и пароль
userdata = user.login_by_email(email, password)
# либо через регистрацию
userdata = user.registrate(username, password, email)
# либо через внешний сервис авторизации
userdata = user.login_or_registrate_by_extern(extern_service, extern_token, extra)
```

Методы `user.login` и `user.login_or_registrate_by_extern` вернут словарь, содержащий следующие поля:
- `microservice_auth_id` - глобальный идентификатор пользователя
- `last_name` - фамилия пользователя
- `first_name`- имя пользователя
- `is_staff` - временно не используется, всегда равен `False`
- `is_active` - временно не используется, всегда равен `False`
- `is_superuser` - временно не используется, всегда равен `False`

Метод `user.registrate` вернёт словарь, содержащий всего одно поле:
- `microservice_auth_id` - глобальный идентификатор только что зарегистрированного пользователя

После успешного получения доступа можно извлечь данные для доступа, чтобы сохранить их в надёжное место:
```python
serialized_auth_data = user.serialize()
```

Метод `user.serialize` вернёт словарь, содержащий поля (все значения - строковые):
- `microservice_auth_id` - глобальный идентификатор пользователя
- `token` - токен доступа, подтверждающий, что пользователь был авторизован ранее (токен имеет срок жизни)
- `auth_public_key` - публичный ключ. Им шифруются данные, отправляемые в микросервис авторизации
- `public_key` - публичный ключ. Им зашифрованы данные, полученные от микросервиса авторизации
- `private_key`- приватный ключ. Им расшифровываются данные, полученные от микросервиса авторизации

Сериализованные данные, извлечённые методом `user.serialize` можно передать как аргументы при инициализации класса `User`:
```python
user = User(token, microservice_auth_id, auth_public_key, private_key, public_key)
```

После такой инициализации доступ уже получен.

Когда пользователь имеет доступ, можно управлять этим пользователем:
```python
# получить информацию о пользователе
user_data = user.get()
# редактировать информацию о пользователе
changed_fields = user.put(first_name='new first name')
# удалить пользователя
user_data = user.delete()
```